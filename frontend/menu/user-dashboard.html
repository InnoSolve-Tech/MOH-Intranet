<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Partner Dashboard - Individual View</title>
    <link rel="stylesheet" href="../css/global.css" />
    <link rel="stylesheet" href="../css/dashboard.css" />
    <link rel="stylesheet" href="../css/admin-dashboard.css" />
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/ag-grid-community@31.0.0/dist/ag-grid-community.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
  </head>
  <body>
    <div class="dashboard-container">
      <!-- Sidebar -->
      <div id="sidebar-container"></div>
      <!-- Main Content -->
      <main class="main-content">
        <header class="content-header">
          <h1>Partner Dashboard</h1>
          <div class="header-actions">
            <button class="btn btn-secondary" onclick="refreshData()">
              <svg
                width="16"
                height="16"
                viewBox="0 0 24 24"
                fill="currentColor"
              >
                <path
                  d="M17.65,6.35C16.2,4.9 14.21,4 12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20C15.73,20 18.84,17.45 19.73,14H17.65C16.83,16.33 14.61,18 12,18A6,6 0 0,1 6,12A6,6 0 0,1 12,6C13.66,6 15.14,6.69 16.22,7.78L13,11H20V4L17.65,6.35Z"
                />
              </svg>
              Refresh Data
            </button>
          </div>
        </header>

        <div class="content-body">
          <!-- Overview Stats Cards for Single Partner -->
          <!-- Focused Stat Cards for Single Partner -->
          <div class="stats-cards">
            <div class="stat-card">
              <div class="stat-icon">
                <svg
                  width="24"
                  height="24"
                  viewBox="0 0 24 24"
                  fill="currentColor"
                >
                  <path
                    d="M12 20c4.418 0 8-3.582 8-8s-3.582-8-8-8-8 3.582-8 8 3.582 8 8 8z"
                  />
                </svg>
              </div>
              <div class="stat-content">
                <div class="stat-number" id="contactsCount">0</div>
                <div class="stat-label">Number of Contacts</div>
              </div>
            </div>

            <div class="stat-card">
              <div class="stat-icon">
                <svg
                  width="24"
                  height="24"
                  viewBox="0 0 24 24"
                  fill="currentColor"
                >
                  <path d="M1 21h22L12 2 1 21z" />
                </svg>
              </div>
              <div class="stat-content">
                <div class="stat-number" id="supportYearsCount">0</div>
                <div class="stat-label">Support Years</div>
              </div>
            </div>

            <div class="stat-card">
              <div class="stat-icon">
                <svg
                  width="24"
                  height="24"
                  viewBox="0 0 24 24"
                  fill="currentColor"
                >
                  <path d="M4 12h16M4 6h16M4 18h16" />
                </svg>
              </div>
              <div class="stat-content">
                <div class="stat-number" id="hasMouStatus">No</div>
                <div class="stat-label">Memorandum Signed</div>
              </div>
            </div>

            <div class="stat-card">
              <div class="stat-icon">
                <svg
                  width="24"
                  height="24"
                  viewBox="0 0 24 24"
                  fill="currentColor"
                >
                  <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14" />
                </svg>
              </div>
              <div class="stat-content">
                <div class="stat-number" id="districtsCoveredCount">0</div>
                <div class="stat-label">Districts Covered</div>
              </div>
            </div>
          </div>

          <!-- Charts Grid -->
          <div class="charts-grid">
            <div class="chart-card">
              <div class="chart-header">
                <h3>Partner Types Distribution</h3>
                <button
                  class="btn btn-sm btn-secondary"
                  onclick="exportChart('partnerTypesChart')"
                >
                  Export
                </button>
              </div>
              <div class="chart-container">
                <canvas id="partnerTypesChart"></canvas>
              </div>
            </div>

            <div class="chart-card">
              <div class="chart-header">
                <h3>Thematic Areas Coverage</h3>
                <button
                  class="btn btn-sm btn-secondary"
                  onclick="exportChart('thematicAreasChart')"
                >
                  Export
                </button>
              </div>
              <div class="chart-container">
                <canvas id="thematicAreasChart"></canvas>
              </div>
            </div>

            <div class="chart-card">
              <div class="chart-header">
                <h3>Geographic Distribution</h3>
                <button
                  class="btn btn-sm btn-secondary"
                  onclick="exportChart('geographicChart')"
                >
                  Export
                </button>
              </div>
              <div class="chart-container">
                <canvas id="geographicChart"></canvas>
              </div>
            </div>

            <div class="chart-card">
              <div class="chart-header">
                <h3>Registration Trends</h3>
                <button
                  class="btn btn-sm btn-secondary"
                  onclick="exportChart('trendsChart')"
                >
                  Export
                </button>
              </div>
              <div class="chart-container">
                <canvas id="trendsChart"></canvas>
              </div>
            </div>
          </div>

          <!-- Advanced Analytics Section -->
          <div id="analytics-section" class="report-section">
            <div class="section-header">
              <h3>Advanced Analytics</h3>
              <div class="date-range-picker">
                <input
                  type="date"
                  id="startDate"
                  onchange="updateAnalytics()"
                />
                <span>to</span>
                <input type="date" id="endDate" onchange="updateAnalytics()" />
              </div>
            </div>

            <div class="analytics-grid">
              <div class="analytics-card">
                <div class="card-header">
                  <h4>Partner Growth Over Time</h4>
                </div>
                <div class="chart-container">
                  <canvas id="growthChart"></canvas>
                </div>
              </div>

              <div class="analytics-card">
                <div class="card-header">
                  <h4>MoU Status Distribution</h4>
                </div>
                <div class="chart-container">
                  <canvas id="mouStatusChart"></canvas>
                </div>
              </div>

              <div class="analytics-card">
                <div class="card-header">
                  <h4>Support Years Analysis</h4>
                </div>
                <div class="chart-container">
                  <canvas id="supportYearsChart"></canvas>
                </div>
              </div>

              <div class="analytics-card">
                <div class="card-header">
                  <h4>District Coverage Heatmap</h4>
                </div>
                <div class="chart-container">
                  <canvas id="districtHeatmapChart"></canvas>
                </div>
              </div>
            </div>
          </div>

          <!-- Trends Section -->
          <div id="trends-section" class="report-section">
            <div class="section-header">
              <h3>Trends Analysis</h3>
              <div class="trend-controls">
                <select id="trendPeriod" onchange="updateTrends()">
                  <option value="monthly">Monthly</option>
                  <option value="quarterly">Quarterly</option>
                  <option value="yearly">Yearly</option>
                </select>
              </div>
            </div>

            <div class="trends-grid">
              <div class="trend-card">
                <div class="card-header">
                  <h4>Registration Trends</h4>
                  <div class="trend-indicator positive">
                    <svg
                      width="16"
                      height="16"
                      viewBox="0 0 24 24"
                      fill="currentColor"
                    >
                      <path d="M7,14L12,9L17,14H7Z" />
                    </svg>
                    +15%
                  </div>
                </div>
                <div class="chart-container">
                  <canvas id="registrationTrendsChart"></canvas>
                </div>
              </div>

              <div class="trend-card">
                <div class="card-header">
                  <h4>Thematic Focus Shifts</h4>
                  <div class="trend-indicator neutral">
                    <svg
                      width="16"
                      height="16"
                      viewBox="0 0 24 24"
                      fill="currentColor"
                    >
                      <path
                        d="M8.5,13.5L11,16.5L14.5,12L19,18H5M21,19V5C21,3.89 20.1,3 19,3H5A2,2 0 0,0 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19Z"
                      />
                    </svg>
                    Stable
                  </div>
                </div>
                <div class="chart-container">
                  <canvas id="thematicTrendsChart"></canvas>
                </div>
              </div>

              <div class="trend-card">
                <div class="card-header">
                  <h4>Geographic Expansion</h4>
                  <div class="trend-indicator positive">
                    <svg
                      width="16"
                      height="16"
                      viewBox="0 0 24 24"
                      fill="currentColor"
                    >
                      <path d="M7,14L12,9L17,14H7Z" />
                    </svg>
                    +8%
                  </div>
                </div>
                <div class="chart-container">
                  <canvas id="geographicTrendsChart"></canvas>
                </div>
              </div>

              <div class="trend-card">
                <div class="card-header">
                  <h4>Partnership Duration</h4>
                  <div class="trend-indicator negative">
                    <svg
                      width="16"
                      height="16"
                      viewBox="0 0 24 24"
                      fill="currentColor"
                    >
                      <path d="M7,10L12,15L17,10H7Z" />
                    </svg>
                    -3%
                  </div>
                </div>
                <div class="chart-container">
                  <canvas id="durationTrendsChart"></canvas>
                </div>
              </div>
            </div>
          </div>
        </div>
      </main>
    </div>

    <script src="../js/dashboard.js"></script>
    <script src="../js/user-dashboard.js"></script>
  </body>
</html>
